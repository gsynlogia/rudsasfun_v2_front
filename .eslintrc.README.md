# Konfiguracja ESLint - Dokumentacja

## Przegląd

Ta konfiguracja ESLint jest zaprojektowana, aby być restrykcyjną, ale kompatybilną z Vercel i Next.js. Wymusza spójność kodu w całym projekcie.

## Główne reguły

### 1. Spójność cudzysłowów i apostrofów
- **Reguła**: `quotes: ["error", "single"]`
- **Wymusza**: Używanie pojedynczych apostrofów (`'`) dla wszystkich stringów
- **Wyjątki**: Template literals są dozwolone, escape w stringach jest dozwolony

### 2. Konkatenacja stringów
- **Reguła**: `prefer-template: "error"`
- **Wymusza**: Używanie template literals (backticks) zamiast konkatenacji
- **Przykład**:
  ```typescript
  // ❌ Błędne
  const message = 'Hello ' + name + '!';
  
  // ✅ Poprawne
  const message = `Hello ${name}!`;
  ```

### 3. ECMAScript 6 i Arrow Functions
- **Reguły**: `no-var`, `prefer-const`, `prefer-arrow-callback`, `func-style`, `prefer-spread`, `prefer-rest-params`, `prefer-destructuring`
- **Wymusza**: 
  - Używanie `const`/`let` zamiast `var`
  - **Arrow functions wszędzie** (z wyjątkiem komponentów React/Next.js)
  - Używanie spread operatora
  - Używanie destructuring
- **Wyjątki**: 
  - Komponenty React/Next.js mogą używać function declarations (kompatybilność z Next.js)
  - Pliki testowe mogą używać function declarations (dla lepszej czytelności)

### 4. Importy - spójność i porządek
- **Reguła**: `import/order`
- **Wymusza**:
  - Grupowanie importów: builtin → external → internal (@/) → parent → sibling → index
  - Puste linie między grupami
  - Alfabetyczne sortowanie w każdej grupie
  - Importy z `@/` są traktowane jako internal

### 5. Interfejsy w osobnych plikach
- **Reguła**: `@typescript-eslint/consistent-type-definitions: ["error", "interface"]`
- **Wymusza**: Używanie `interface` zamiast `type` dla definicji obiektów
- **Uwaga**: Interfejsy powinny być w osobnych plikach w katalogu `types/`

### 6. Ogólne restrykcyjne reguły
- **no-console**: Ostrzeżenia dla `console.log`, dozwolone `console.warn` i `console.error`
- **no-debugger**: Błąd dla `debugger`
- **no-unused-vars**: Błąd dla nieużywanych zmiennych (z wyjątkiem zmiennych zaczynających się od `_`)
- **eqeqeq**: Wymusza używanie `===` zamiast `==`
- **no-eval**: Zabrania używania `eval`
- **semi**: Wymusza średniki
- **comma-dangle**: Wymusza trailing commas w wieloliniowych strukturach

## Wyłączenia dla kompatybilności z Vercel/Next.js

Następujące reguły są wyłączone dla kompatybilności z Next.js i Vercel:

1. **indent**: Wyłączone, bo Next.js ma własne formatowanie
2. **react/function-component-definition**: Wyłączone, bo Next.js używa function declarations dla komponentów

## Wyłączenia dla plików testowych

W plikach testowych (`**/*.test.ts`, `**/*.test.tsx`, `**/tests/**/*.ts`, `**/tests/**/*.tsx`):

- `no-console`: Wyłączone (pozwala na console.log w testach)
- `@typescript-eslint/no-explicit-any`: Wyłączone (pozwala na `any` w testach)

## Użycie

### Sprawdzenie błędów
```bash
npm run lint
```

### Automatyczne naprawienie niektórych błędów
```bash
npm run lint -- --fix
```

### Sprawdzenie z maksymalną liczbą ostrzeżeń = 0
```bash
npm run lint -- --max-warnings=0
```

## Nowe reguły - Białe znaki i nieużywany kod

### 1. Trailing whitespace (spacje na końcu linii)
- **Reguła**: `no-trailing-spaces: ["error"]`
- **Wykrywa**: Spacje i tabulacje na końcu linii
- **Automatyczna naprawa**: `npm run lint -- --fix`

### 2. Zbyt wiele pustych linii
- **Reguła**: `no-multiple-empty-lines: ["error", { max: 2, maxEOF: 1, maxBOF: 0 }]`
- **Wymusza**: 
  - Maksymalnie 2 puste linie pod rząd
  - Maksymalnie 1 pusta linia na końcu pliku
  - Brak pustych linii na początku pliku

### 3. Wykrywanie nieużywanego kodu
- **Reguła**: `@typescript-eslint/no-unused-vars`
- **Wykrywa**:
  - Nieużywane zmienne
  - Nieużywane parametry funkcji
  - Nieużywane importy
  - Nieużywane zmienne w catch blocks
- **Wyjątki**: Zmienne zaczynające się od `_` są ignorowane

### 4. Nieużywane wyrażenia
- **Reguła**: `no-unused-expressions: ["error"]`
- **Wykrywa**: Wyrażenia które nie są używane (np. `a && b` bez przypisania)

### 5. Whitespace w różnych miejscach
- **comma-spacing**: Spacje przed/po przecinkach
- **space-in-parens**: Spacje w nawiasach
- **spaced-comment**: Spacje w komentarzach
- **template-curly-spacing**: Spacje w template literals
- **computed-property-spacing**: Spacje w computed properties

## Najczęstsze błędy i jak je naprawić

### 1. Błędne cudzysłowy
```typescript
// ❌ Błędne
const message = "Hello";

// ✅ Poprawne
const message = 'Hello';
```

### 2. Konkatenacja zamiast template literals
```typescript
// ❌ Błędne
const fullName = firstName + ' ' + lastName;

// ✅ Poprawne
const fullName = `${firstName} ${lastName}`;
```

### 3. Nieprawidłowa kolejność importów
```typescript
// ❌ Błędne
import { useState } from 'react';
import axios from 'axios';
import { Button } from '@/components/Button';

// ✅ Poprawne
import { useState } from 'react';

import axios from 'axios';

import { Button } from '@/components/Button';
```

### 4. Brakujące trailing commas
```typescript
// ❌ Błędne
const obj = {
  name: 'John',
  age: 30
};

// ✅ Poprawne
const obj = {
  name: 'John',
  age: 30,
};
```

### 5. Używanie var zamiast const/let
```typescript
// ❌ Błędne
var count = 0;

// ✅ Poprawne
const count = 0;
```

### 6. Trailing whitespace
```typescript
// ❌ Błędne (spacje na końcu linii)
const name = 'John';    

// ✅ Poprawne
const name = 'John';
```

### 7. Zbyt wiele pustych linii
```typescript
// ❌ Błędne (3 puste linie pod rząd)


const name = 'John';

// ✅ Poprawne (maksymalnie 2 puste linie)

const name = 'John';
```

### 8. Nieużywane zmienne
```typescript
// ❌ Błędne
const unused = 'test';
const name = 'John';

// ✅ Poprawne (usuń nieużywane zmienne lub dodaj prefix _)
const _unused = 'test'; // Jeśli naprawdę potrzebujesz
const name = 'John';
```

### 9. Nieużywane importy
```typescript
// ❌ Błędne
import { useState, useEffect } from 'react';
// useEffect nie jest używane

// ✅ Poprawne
import { useState } from 'react';
```

### 10. Arrow Functions (wymagane)
```typescript
// ❌ Błędne (function declaration)
export function formatDate(dateString: string): string {
  return dateString;
}

// ✅ Poprawne (arrow function)
export const formatDate = (dateString: string): string => {
  return dateString;
};

// Wyjątek: Komponenty React/Next.js mogą używać function declarations
export default function MyComponent() {
  return <div>Hello</div>;
}
```

## Integracja z Vercel

Ta konfiguracja jest w pełni kompatybilna z Vercel. Vercel automatycznie uruchamia `npm run lint` podczas builda, więc wszystkie błędy ESLint będą wykryte przed deploymentem.

## Uwagi

- Niektóre reguły mogą wymagać ręcznej naprawy (np. kolejność importów)
- Automatyczne naprawienie (`--fix`) może naprawić większość problemów z formatowaniem
- Dla najlepszych wyników, uruchamiaj `npm run lint` regularnie podczas rozwoju

